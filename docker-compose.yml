version: '2'
services:
  wordpress:
    container_name: fe_guys_server
    image: visiblevc/wordpress:latest
    ports:
      - 8080:80
      - 443:443
    volumes:
      - ./data:/data
      - ./wordpress/wp-content/themes/fe-guys:/app/wp-content/themes/fe-guys #Theme
      # - ./wordpress/wp-content/plugins/advanced-custom-fields:/app/wp-content/plugins/advanced-custom-fields #Plugin
      # - ./wordpress/wp-content/plugins/custom-post-type-ui:/app/wp-content/plugins/custom-post-type-ui #Plugin
      # - ./wordpress/wp-content/plugins/masterslider:/app/wp-content/plugins/masterslider #Plugin
      # - ./wordpress/wp-content/plugins/page-scroll-to-id:/app/wp-content/plugins/page-scroll-to-id #Plugin
      # - ./wordpress/wp-content/plugins/simple-custom-post-order:/app/wp-content/plugins/simple-custom-post-order #Plugin
      # - ./wordpress/wp-content/plugins/simple-image-sizes:/app/wp-content/plugins/simple-image-sizes #Plugin
      - ./wordpress/wp-content/uploads:/app/wp-content/uploads #Uploads
    environment:
      # PLUGINS: >-
      #   [local]advanced-custom-fields,
      #   [local]custom-post-type-ui,
      #   [local]masterslider,
      #   [local]page-scroll-to-id,
      #   [local]simple-custom-post-order,
      #   [local]simple-image-sizes
      THEMES: >-
        [local]fe-guys
      SERVER_NAME: dev-machine
      SEARCH_REPLACE: "localhost:8080, dev-machine:8080"
      DB_NAME: fe_guys
      DB_PASS: root
      ADMIN_EMAIL: admin@frontend-guys.com
    depends_on:
      - "db"
  db:
    container_name: fe_guys_db
    image: mariadb:10 # or mysql:5.7
    volumes:
      - data_volume:/var/lib/mysql
    environment:
      MYSQL_ROOT_PASSWORD: root

  phpmyadmin:
    container_name: fe_guys_phpmyadmin
    image: phpmyadmin/phpmyadmin
    environment:
      MYSQL_ROOT_PASSWORD: root
    ports:
      - 22222:80
    depends_on:
      - "db"

  angular:
    container_name: fe_guys_angular
    build: ./game
    command: "npm start"
    ports:
      - 4200:4200
    volumes:
      - ./game/src:/home/app/src
volumes:
  data_volume:
